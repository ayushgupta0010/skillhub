"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[202],{51042:function(te,D,l){var h=l(1413),y=l(67294),K=l(42110),R=l(84089),A=function(I,L){return y.createElement(R.Z,(0,h.Z)((0,h.Z)({},I),{},{ref:L,icon:K.Z}))},b=y.forwardRef(A);D.Z=b},86598:function(te,D,l){l.r(D);var h=l(15009),y=l.n(h),K=l(99289),R=l.n(K),A=l(5574),b=l.n(A),w=l(51042),I=l(2618),L=l(90930),ae=l(27181),T=l(76772),le=l(53025),ne=l(83622),u=l(67294),re=l(82254),se=l(66327),_e=l(96486),M=l.n(_e),P=l(87200),C=l(85893),oe=function(){var B,d,W,v,F,f,j,m,N,p,ie=(0,T.useModel)("@@initialState"),t=ie.initialState,g=(0,u.useRef)(),ue=(0,u.useRef)(),U=(0,u.useRef)(),o=(0,T.useParams)(),de=(0,u.useState)({}),z=b()(de,2),E=z[0],ve=z[1],fe=(0,u.useState)([]),Z=b()(fe,2),me=Z[0],pe=Z[1],Ee=(0,u.useState)({}),$=b()(Ee,2),G=$[0],be=$[1],ce=(0,u.useState)([]),Q=b()(ce,2),ye=Q[0],Me=Q[1],Pe=(0,u.useState)(!1),x=b()(Pe,2),Oe=x[0],H=x[1],Te=(0,u.useState)(),V=b()(Te,2),ge=V[0],J=V[1],De=le.Z.useForm(),he=b()(De,1),Le=he[0],Re=(0,u.useState)(),X=b()(Re,2),Ce=X[0],Y=X[1],Ue=(0,u.useRef)(),Se=(B=t==null||(d=t.settings)===null||d===void 0||(d=d.raw_tables)===null||d===void 0||(d=d[o.table])===null||d===void 0||(d=d.create)===null||d===void 0?void 0:d.enable)!==null&&B!==void 0?B:!1,k=(W=t==null||(v=t.settings)===null||v===void 0||(v=v.raw_tables)===null||v===void 0||(v=v[o.table])===null||v===void 0||(v=v.table)===null||v===void 0?void 0:v.page_size)!==null&&W!==void 0?W:20,Ke=(F=t==null||(f=t.settings)===null||f===void 0||(f=f.raw_tables)===null||f===void 0||(f=f[o.table])===null||f===void 0||(f=f.table)===null||f===void 0?void 0:f.table_size)!==null&&F!==void 0?F:"middle";return(0,u.useEffect)(function(){var r=function(){var e=R()(y()().mark(function a(){var n,s,c;return y()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,P.st)(o.table);case 2:return s=_.sent,c=(n=s.primary_key)!==null&&n!==void 0?n:[],pe(c),be(s.cols),_.next=8,(0,T.request)("".concat("/api","/graphql"),{method:"POST",headers:(0,I.zl)(),data:{query:(0,re.K)(),variables:{}}});case 8:return _.abrupt("return",_.sent);case 9:case"end":return _.stop()}},a)}));return function(){return e.apply(this,arguments)}}();r().then(function(e){var a=(0,se.Z)(e.data),n=a.getQueryType().getFields();ve(n)})},[]),(0,u.useEffect)(function(){var r,e,a;if(!M().isEmpty(E)){var n=o.table,s=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[n])!==null&&r!==void 0?r:{},c=E[n].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields(),i=(0,P.SS)(s,n,c,J,Y,g,G);Me(i),(a=g.current)===null||a===void 0||a.reloadAndRest()}},[E]),(0,C.jsxs)(L._z,{header:{title:null,breadcrumb:{items:[{href:"#",title:"Raw Tables",onClick:function(){return T.history.push("/table")}},{title:(j=t==null||(m=t.settings)===null||m===void 0||(m=m.raw_tables)===null||m===void 0||(m=m[o.table])===null||m===void 0||(m=m.table)===null||m===void 0?void 0:m.title)!==null&&j!==void 0?j:M().startCase(o.table)}]}},children:[(0,C.jsx)(ae.Z,{headerTitle:(N=t==null||(p=t.settings)===null||p===void 0||(p=p.raw_tables)===null||p===void 0||(p=p[o.table])===null||p===void 0||(p=p.table)===null||p===void 0?void 0:p.title)!==null&&N!==void 0?N:M().startCase(o.table),actionRef:g,request:function(){var r=R()(y()().mark(function e(a,n,s){var c,i,_,S,q,ee;return y()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return _=o.table,S=(c=t==null||(i=t.settings)===null||i===void 0||(i=i.raw_tables)===null||i===void 0?void 0:i[_])!==null&&c!==void 0?c:{},q=E[_].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields(),ee=Object.values(E[_].args).find(function(Ae){return Ae.name=="filters"}),O.next=6,(0,P.pC)(a,n,s,S,_,q,ee,[],G);case 6:return O.abrupt("return",O.sent);case 7:case"end":return O.stop()}},e)}));return function(e,a,n){return r.apply(this,arguments)}}(),toolBarRender:function(){var e;return Se?[(0,C.jsx)(ne.ZP,{icon:(0,C.jsx)(w.Z,{}),onClick:t!=null&&(e=t.settings)!==null&&e!==void 0&&(e=e.raw_tables)!==null&&e!==void 0&&(e=e[o.table].editor)!==null&&e!==void 0&&e.enable?function(){var a,n,s=o.table,c=(a=t==null||(n=t.settings)===null||n===void 0||(n=n.raw_tables)===null||n===void 0?void 0:n[s])!==null&&a!==void 0?a:{},i=window.location.pathname.split("/"),_=i[i.length-1],S=i[i.length-2];T.history.push("/".concat(S,"/").concat(_,"/create"),{config:c,tableName:s})}:function(){var a;H(!0),U==null||(a=U.current)===null||a===void 0||a.resetFields()},type:"primary",size:"small",children:"New"},"button")]:[]},columns:ye,rowKey:"_uuid_v4_",dateFormatter:"string",toolbar:{multipleLine:!0},pagination:{pageSizeOptions:M().sortedUniq([10,20,50,100,k].sort(function(r,e){return r-e})),defaultPageSize:k},defaultSize:Ke}),function(r,e){if(!M().isEmpty(E)){var a=o.table,n=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[a])!==null&&r!==void 0?r:{},s=E[a].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields();return(0,P.HF)(n,a,s,ge,J,ue,g,me)}}(),function(r,e){if(!M().isEmpty(E)){var a=o.table,n=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[a])!==null&&r!==void 0?r:{},s=E[a].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields();return(0,P.SI)(n,a,s,Oe,H,U,g)}}(),function(r,e){if(!M().isEmpty(E)){var a=o.table,n=(r=t==null||(e=t.settings)===null||e===void 0||(e=e.raw_tables)===null||e===void 0?void 0:e[a])!==null&&r!==void 0?r:{},s=E[a].type.ofType.getFields().nodes.type.ofType.ofType.ofType.getFields();return(0,P.WM)(n,a,s,Ce,Y,Ue)}}()]})};D.default=oe}}]);
